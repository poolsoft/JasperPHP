{
  "name": "JasperPHP",
  "tagline": "Projeto para ler arquivos JRXML feitos no \"JasperSoft Studio\" e gerar relatórios em PDF",
  "body": "# JasperPHP\r\nProjeto para gerar relatórios criados com o o aplicativo JasperSoft Studio<br>\r\nBiblioteca produzida interiramente em php, ou seja se a nessecidade de um servidor java\r\n\r\n```php\r\n<?php\r\nuse JasperPHP\\Report;\r\nuse JasperPHP\\Report2XLS;\r\nuse JasperPHP\\ado\\TTransaction;\r\nuse JasperPHP\\ado\\TLoggerHTML;\r\n\r\n//use PHPexcel as PHPexcel;\r\n/**\r\n* classe TJasper\r\n* encapsula uma ação\r\n*\r\n* @author   Rogerio Muniz de Castro <rogerio@singularsistemas.net>\r\n* @version  2015.03.11\r\n* @access   restrict\r\n* \r\n* 2015.03.11 -- criação\r\n**/\r\nclass TJasper\r\n{\r\n    private $report;\r\n    private $type;\r\n\r\n    /**\r\n    * método __construct()\r\n    * instancia uma nova ação\r\n    * @param $action = método a ser executado\r\n    */\r\n    public function __construct($jrxml,$param)\r\n    {\r\n        $xmlFile=  $jrxml;\r\n        $this->type = (array_key_exists('type',$param))?$param['type']:'pdf';\r\n        error_reporting(0);\r\n        switch ($this->type)\r\n        {\r\n            case 'pdf': \r\n                $this->report =new JasperPHP\\Report($xmlFile,$param);\r\n                JasperPHP\\Pdf::prepare($this->report);\r\n                break;\r\n            case 'xls':\r\n                JasperPHP\\Excel::prepare();\r\n                $this->report =new JasperPHP\\Report2XLS($xmlFile,$param);\r\n                \r\n                break;\r\n        }\r\n    }\r\n    public function outpage($type='pdf'){\r\n        $this->report->generate();\r\n        $this->report->out();\r\n        switch ($this->type)\r\n        {\r\n            case 'pdf':\r\n                $pdf  = JasperPHP\\Pdf::get();\r\n                $pdf->Output('Relatorio.pdf',\"I\");\r\n                break;\r\n            case 'xls':\r\n                header('Content-Type: application/vnd.ms-excel');\r\n                header('Content-Disposition: attachment;filename=\"01simple.xls\"');\r\n                header('Cache-Control: max-age=0');\r\n                // If you're serving to IE 9, then the following may be needed\r\n                header('Cache-Control: max-age=1');\r\n                // If you're serving to IE over SSL, then the following may be needed\r\n                header ('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // Date in the past\r\n                header ('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT'); // always modified\r\n                header ('Cache-Control: cache, must-revalidate'); // HTTP/1.1\r\n                header ('Pragma: public'); // HTTP/1.0\r\n                $objWriter = PHPExcel_IOFactory::createWriter($this->report->wb, 'Excel5');\r\n                $objWriter->save('php://output');\r\n            break;\r\n        }\r\n        \r\n    }\r\n    public function setVariable($name,$value){\r\n        $this->report->arrayVariable[$name]['initialValue'] = $value ;\r\n    }\r\n}\r\nrequire('autoloader.php') ;\r\nTTransaction::open('dev');\r\n$jasper = new TJasper('template.jrxml',$_GET);\r\n$jasper->outpage();\r\n?>\r\n\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}